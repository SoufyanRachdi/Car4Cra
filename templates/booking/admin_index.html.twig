{% extends 'base.html.twig' %}

{% block title %}Manage Bookings{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1>Manage Bookings</h1>
        <div class="text-muted">Total Bookings: {{ bookings|length }}</div>
    </div>

    <div class="card" style="box-shadow: var(--shadow-lg); border: none; overflow: hidden;">
        <div class="table-responsive">
            <table class="table" style="width: 100%; border-collapse: collapse; text-align: left;">
                <thead style="background-color: #f8fafc; border-bottom: 1px solid var(--border);">
                    <tr>
                        <th style="padding: 1rem; font-weight: 600; color: var(--text-muted);">ID</th>
                        <th style="padding: 1rem; font-weight: 600; color: var(--text-muted);">User</th>
                        <th style="padding: 1rem; font-weight: 600; color: var(--text-muted);">Car Details</th>
                        <th style="padding: 1rem; font-weight: 600; color: var(--text-muted);">Duration</th>
                        <th style="padding: 1rem; font-weight: 600; color: var(--text-muted);">Total Price</th>
                        <th style="padding: 1rem; font-weight: 600; color: var(--text-muted);">Status</th>
                        <th style="padding: 1rem; font-weight: 600; color: var(--text-muted); text-align: right;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for booking in bookings %}
                    <tr style="border-bottom: 1px solid var(--border); transition: background 0.2s;" onmouseover="this.style.background='#f8fafc'" onmouseout="this.style.background='transparent'">
                        <td style="padding: 1rem; color: var(--text-muted);">#{{ booking.id }}</td>
                        <td style="padding: 1rem;">
                            <div style="font-weight: 500;">{{ booking.user.email }}</div>
                        </td>
                        <td style="padding: 1rem;">
                            <div style="font-weight: 600;">{{ booking.car.make }} {{ booking.car.model }}</div>
                            <div style="font-size: 0.875rem; color: var(--text-muted);">{{ booking.car.year }}</div>
                        </td>
                        <td style="padding: 1rem;">
                            <div>{{ booking.startDate ? booking.startDate|date('M d, Y') : '' }}</div>
                            <div style="font-size: 0.875rem; color: var(--text-muted);">to {{ booking.endDate ? booking.endDate|date('M d, Y') : '' }}</div>
                        </td>
                        <td style="padding: 1rem; font-weight: 600;">${{ booking.totalPrice }}</td>
                        <td style="padding: 1rem;">
                            <span class="badge bg-{{ booking.status == 'confirmed' ? 'success' : 'secondary' }}" 
                                  style="
                                      background-color: {{ booking.status == 'confirmed' ? '#dcfce7' : '#e2e8f0' }}; 
                                      color: {{ booking.status == 'confirmed' ? '#166534' : '#475569' }};
                                      padding: 0.25rem 0.75rem; border-radius: 9999px; font-weight: 600; font-size: 0.75rem; text-transform: uppercase;">
                                {{ booking.status }}
                            </span>
                        </td>
                        <td style="padding: 1rem; text-align: right;">
                            <form method="post" action="{{ path('admin_booking_delete', {'id': booking.id}) }}" onsubmit="return confirm('Are you sure you want to delete this booking?');" style="display:inline-block">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ booking.id) }}">
                                <button class="btn btn-sm" style="color: #ef4444; background: #fef2f2; border: 1px solid #fecaca; transition: all 0.2s;" onmouseover="this.style.background='#ef4444'; this.style.color='white'" onmouseout="this.style.background='#fef2f2'; this.style.color='#ef4444'">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="7" style="padding: 3rem; text-align: center; color: var(--text-muted);">
                            No bookings found.
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
